(S (S (NP (NP (DT A) (JJ large) (NN fraction)) (PP (IN of) (NP (JJ online) (NN display) (NN advertising)))) (VP (VBZ is) (VP (VBN sold) (PP (IN via) (NP (VBN guaranteed) (NNS contracts)))))) (: :) (S (NP (DT a) (NN publisher)) (VP (VBZ guarantees) (PP (TO to) (NP (DT the) (NN advertiser))) (NP (NP (DT a) (JJ certain) (NN number)) (PP (IN of) (NP (JJ user) (NNS visits))) (VP (VBG satisfying) (NP (NP (DT the) (VBG targeting) (NNS predicates)) (PP (IN of) (NP (DT the) (NN contract)))))))) (. .))
(S (NP (DT The) (NN publisher)) (VP (VBZ is) (ADVP (RB then)) (VP (VBN tasked) (PP (IN with) (S (VP (VBG solving) (NP (NP (DT the) (NN ad) (NN serving) (NN problem)) (: -) (S (PP (VBN given) (NP (DT a) (JJ user) (NN visit))) (, ,) (WHNP (WHNP (WDT which)) (PP (IN of) (NP (NP (DT the) (NNS thousands)) (PP (IN of) (NP (VBG matching) (NNS contracts)))))) (S (VP (MD should) (VP (VB be) (VP (VBN displayed) (, ,) (SBAR (IN so) (IN that) (S (PP (IN by) (NP (DT the) (NN expiration) (NN time))) (NP (DT every) (NN contract)) (VP (VBZ has) (VP (VBN obtained) (NP (NP (DT the) (JJ requisite) (NN number)) (PP (IN of) (NP (JJ user) (NNS visits))))))))))))))))))) (. .))
(S (NP (NP (DT The) (NNS challenges)) (PP (IN of) (NP (DT the) (NN problem)))) (VP (NN come) (PP (IN from) (NP (NP (PRN (-LRB- -LRB-) (CD 1) (-RRB- -RRB-)) (NP (NP (DT the) (NN sheer) (NN size)) (PP (IN of) (NP (NP (DT the) (NN problem)) (VP (VBG being) (VP (VBN solved))))) (, ,) (PP (IN with) (NP (NP (NNS tens)) (PP (IN of) (NP (NP (NP (NNS thousands)) (PP (IN of) (NP (NNS contracts)))) (CC and) (NP (NP (NNS billions)) (PP (IN of) (NP (JJ user) (NNS visits)))))))))) (, ,) (NP (NP (PRN (-LRB- -LRB-) (CD 2) (-RRB- -RRB-)) (NP (DT the) (NN unpredictability))) (PP (IN of) (NP (JJ user) (NN behavior))) (, ,) (SBAR (IN since) (S (NP (DT these) (NNS contracts)) (VP (VBP are) (VP (VBN sold) (ADVP (NP (NNS months)) (RB ahead) (PP (IN of) (NP (NN time)))) (, ,) (SBAR (WHADVP (WRB when)) (S (NP (NP (RB only) (DT a) (NN forecast)) (PP (IN of) (NP (JJ user) (NNS visits)))) (VP (VBZ is) (ADJP (JJ available)))))))))) (CC and) (NP (LST (-LRB- -LRB-) (CD 3) (-RRB- -RRB-)) (NP (NP (DT the) (NN minute) (NN amount)) (PP (IN of) (NP (NNS resources))) (ADJP (JJ available) (ADVP (NN online))) (, ,) (SBAR (IN as) (S (NP (DT an) (NN ad) (NN server)) (VP (MD must) (VP (VB respond) (PP (IN with) (NP (DT a) (VBG matching) (NN contract))) (PP (IN in) (NP (NP (DT a) (NN fraction)) (PP (IN of) (NP (DT a) (JJ second)))))))))))))) (. .))
(S (S (NP (NP (DT These) (NNS plans)) (, ,) (VP (VBD computed) (ADVP (NN offline))) (, ,)) (VP (MD can) (VP (VB be) (VP (ADVP (RB efficiently)) (VBN queried) (PP (IN by) (NP (DT the) (NN ad) (NN server))) (PP (IN during) (NP (DT an) (NN ad) (NN call))))))) (: ;) (S (S (NP (PRP they)) (VP (VBP are) (ADJP (JJ small)) (, ,) (S (VP (VBG using) (NP (RB only) (NNP O) (PRN (-LRB- -LRB-) (CD 1) (-RRB- -RRB-)) (NN space)) (PP (IN for) (NP (NN contract))))))) (: ;) (CC and) (VP (VBP are) (ADJP (JJ stateless)) (, ,) (S (VP (VBG allowing) (PP (IN for) (NP (NP (VBN distributed) (VBG serving)) (PP (IN without) (NP (DT any) (JJ central) (NN coordination))))))))) (. .))
(S (NP (PRP We)) (VP (VP (VBP evaluate) (NP (DT this) (NN approach)) (PP (IN on) (NP (NP (DT a) (JJ real) (NN set)) (PP (IN of) (NP (NP (JJ user) (NNS visits)) (CC and) (NP (VBN guaranteed) (NNS contracts))))))) (CC and) (VP (NN show) (SBAR (IN that) (S (NP (DT the) (JJ compact) (NN allocation) (NNS plans)) (VP (VBP are) (NP (NP (DT an) (JJ effective) (NN way)) (PP (IN of) (S (VP (VBG solving) (NP (DT the) (JJ guaranteed) (NN delivery) (NN ad) (NN serving) (NN problem))))))))))) (. .))
