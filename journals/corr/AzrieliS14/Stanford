(S (S (NP (PRP We)) (VP (VBP prove) (NP (NP (NN existence)) (PP (IN of) (NP (ADJP (NP (NN envy)) (HYPH -) (JJ free)) (NNS allocations)))) (PP (IN in) (NP (NNS markets))) (PP (IN with) (NP (NP (JJ heterogenous) (JJ indivisible) (NNS goods)) (CC and) (NP (NN money)))) (, ,) (SBAR (WHADVP (WRB when)) (S (NP (DT a) (VBN given) (NN quantity)) (VP (VBZ is) (VP (VBN supplied) (PP (IN from) (NP (NP (DT each)) (PP (IN of) (NP (DT the) (NNS goods))))))))))) (CC and) (S (NP (NNS agents)) (VP (VBP have) (NP (NN unit) (NNS demands)))) (. .))
(S (NP (PRP We)) (VP (VBP depart) (PP (IN from) (NP (NP (JJS most)) (PP (IN of) (NP (DT the) (JJ previous) (NN literature))))) (PP (IN by) (S (VP (VBG allowing) (NP (NP (NP (NNS agents) (POS ')) (NNS preferences)) (PP (IN over) (NP (DT the) (NNS goods)))) (S (VP (TO to) (VP (VB depend) (PP (IN on) (NP (NP (DT the) (JJ entire) (NN vector)) (PP (IN of) (NP (NNS prices)))))))))))) (. .))
(S (NP (PRP$ Our) (NN proof)) (VP (VBZ uses) (NP (NP (NP (NNP Shapley) (POS 's)) (NML (NN K) (HYPH -) (NN K) (HYPH -) (NN M) (HYPH -) (NN S)) (NN theorem)) (CC and) (NP (NP (NNP Hall) (POS 's)) (NN marriage) (NN lemma)))) (. .))
(S (NP (PRP We)) (ADVP (RB then)) (VP (VBP show) (SBAR (WHADVP (WRB how)) (S (NP (PRP$ our) (NN theorem)) (VP (MD may) (VP (VB be) (VP (VBN applied) (PP (IN in) (NP (NP (NP (CD two) (JJ related) (NNS problems)) (: :) (NP (NP (NN Existence)) (PP (IN of) (NP (NP (ADJP (NP (NN envy)) (HYPH -) (JJ free)) (NNS allocations)) (PP (IN in) (NP (NP (DT a) (NN version)) (PP (IN of) (NP (DT the) (NML (NN cake) (HYPH -) (NN cutting)) (NN problem))))))))) (, ,) (CC and) (NP (NP (NN existence)) (PP (IN of) (NP (NP (NN equilibrium)) (PP (IN in) (NP (DT an) (NN exchange) (NN economy)))))))) (PP (IN with) (NP (NP (JJ indivisible) (NNS goods)) (CC and) (NP (NN money)))))))))) (. .))
