(S (SBAR (WHADVP (WRB When)) (S (VP (VBG verifying) (NP (DT a) (JJ concurrent) (NN program))))) (, ,) (NP (PRP it)) (VP (VBZ is) (ADJP (JJ usual) (S (VP (TO to) (VP (VB assume) (SBAR (IN that) (S (NP (NN memory)) (VP (VBZ is) (ADVP (RB sequentially)) (ADJP (JJ consistent)))))))))) (. .))
(S (ADVP (RB However)) (, ,) (NP (JJS most) (JJ modern) (NNS multiprocessors)) (VP (VP (VBP depend) (PP (IN on) (NP (NN store))) (S (VP (VBG buffering) (PP (IN for) (NP (NN efficiency)))))) (, ,) (CC and) (VP (VB provide) (NP (JJ native) (JJ sequential) (NN consistency)) (ADVP (RB only)) (PP (IN at) (NP (DT a) (JJ substantial) (NN performance) (NN penalty))))) (. .))
(S (S (VP (TO To) (VP (VB regain) (NP (JJ sequential) (NN consistency))))) (, ,) (NP (DT a) (NN programmer)) (VP (VBZ has) (S (VP (TO to) (VP (VB follow) (NP (DT an) (JJ appropriate) (NN programming) (NN discipline)))))) (. .))
(S (NP (PRP We)) (VP (VBP present) (NP (NP (DT a) (JJ new) (NN discipline)) (PP (IN for) (NP (JJ concurrent) (NN programming)))) (PP (IN under) (NP (NNP TSO))) (PRN (-LRB- -LRB-) (NP (NP (JJ total) (NN store) (NN order)) (, ,) (PP (IN with) (NP (NN store) (NN buffer) (NN forwarding)))) (-RRB- -RRB-))) (. .))
(S (NP (PRP It)) (VP (VBZ does) (RB not) (VP (VB depend) (PP (IN on) (NP (NN concurrency) (NNS primitives))) (, ,) (PP (JJ such) (PP (IN as) (NP (NNS locks)))))) (. .))
(S (ADVP (RB Instead)) (, ,) (NP (NNS threads)) (VP (VBP use) (NP (NN ghost) (NNS operations)) (S (VP (TO to) (VP (VB acquire) (CC and) (VB release) (NP (NP (NN ownership)) (PP (IN of) (NP (NN memory) (NNS addresses)))))))) (. .))
(S (S (NP (DT A) (NN thread)) (VP (MD can) (VP (VB write) (PP (IN to) (NP (DT an) (NN address))) (SBAR (RB only) (IN if) (S (NP (DT no) (JJ other) (NN thread)) (VP (VP (VBZ owns) (NP (PRP it))) (, ,) (CC and) (VP (MD can) (VP (VB read) (PP (IN from) (NP (DT an) (NN address))) (SBAR (RB only) (IN if) (S (NP (PRP it)) (VP (VBZ owns) (SBAR (S (NP (PRP it) (CC or) (PRP it)) (VP (VBZ is) (VP (VBN shared)))))))))))))))) (CC and) (S (NP (DT the) (NN thread)) (VP (VBZ has) (VP (VBN flushed) (NP (PRP$ its) (NN store) (NN buffer)) (SBAR (IN since) (S (NP (PRP it)) (ADVP (JJ last)) (VP (VBD wrote) (PP (IN to) (NP (NP (DT an) (NN address)) (SBAR (S (NP (PRP it)) (VP (VBD did) (RB not) (VP (VB own))))))))))))) (. .))
(S (NP (DT This) (NN discipline)) (VP (VBZ covers) (NP (NP (NP (CC both) (ADJP (NP (JJ coarse)) (HYPH -) (JJ grained)) (NN concurrency)) (-LRB- -LRB-) (SBAR (WHADVP (WRB where)) (S (NP (NNS data)) (VP (VBZ is) (VP (VBN protected) (PP (IN by) (NP (NNS locks))))))) (-RRB- -RRB-)) (CONJP (RB as) (RB well) (IN as)) (NP (ADJP (JJ fine) (HYPH -) (JJ grained)) (NN concurrency) (PRN (-LRB- -LRB-) (SBAR (WHADVP (WRB where)) (S (NP (NP (JJ atomic) (NNS operations) (NN race)) (PP (IN to) (NP (NN memory)))))) (-RRB- -RRB-))))) (. .))
(S (NP (PRP We)) (VP (VP (VBP formalize) (NP (NP (DT this) (NN discipline)) (PP (IN in) (NP (NNP Isabelle) (HYPH /) (NNP HOL))))) (, ,) (CC and) (VP (VB prove) (SBAR (IN that) (S (SBAR (IN if) (S (NP (NP (DT every) (NN execution)) (PP (IN of) (NP (NP (DT a) (NN program)) (PP (IN in) (NP (NP (DT a) (NN system)) (PP (IN without) (NP (NN store) (NNS buffers)))))))) (VP (VBZ follows) (NP (DT the) (NN discipline))))) (, ,) (ADVP (RB then)) (NP (NP (DT every) (NN execution)) (PP (IN of) (NP (NP (DT the) (NN program)) (PP (IN with) (NP (NN store) (NNS buffers)))))) (VP (VBZ is) (ADVP (RB sequentially)) (ADJP (JJ consistent))))))) (. .))
(S (ADVP (RB Thus)) (, ,) (NP (PRP we)) (VP (MD can) (VP (VB show) (NP (NP (JJ sequential) (NN consistency)) (PP (IN under) (NP (NN TSO)))) (PP (IN by) (NP (NP (JJ ordinary) (JJ assertional) (NN reasoning)) (PP (IN about) (NP (DT the) (NN program))))) (, ,) (PP (IN without) (S (VP (VBG having) (S (VP (TO to) (VP (VB consider) (NP (NN store) (NNS buffers)) (ADVP (IN at) (RB all)))))))))) (. .))
