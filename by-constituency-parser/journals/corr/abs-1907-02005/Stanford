(S (NP (NNP Energy) (NN storage)) (VP (MD can) (VP (VB play) (NP (DT an) (JJ important) (NN role)) (PP (IN in) (NP (NP (NN energy) (NN management)) (PP (IN of) (NP (NN end) (NNS users))))))) (. .))
(S (S (VP (TO To) (VP (VB promote) (NP (NP (DT an) (JJ efficient) (NN utilization)) (PP (IN of) (NP (NN energy) (NN storage))))))) (, ,) (NP (PRP we)) (VP (VBP develop) (NP (DT a) (JJ novel) (NN business) (NN model)) (S (VP (TO to) (VP (VB enable) (NP (JJ virtual) (NN storage) (NN sharing)) (PP (IN among) (NP (NP (DT a) (NN group)) (PP (IN of) (NP (NNS users))))))))) (. .))
(S (ADVP (RB Specifically)) (, ,) (NP (DT a) (NN storage) (NN aggregator)) (VP (VBZ invests) (CC and) (VBZ operates) (NP (DT the) (JJ central) (NML (JJ physical) (NN storage)) (NN unit)) (, ,) (PP (IN by) (S (VP (VP (VBG virtualizing) (NP (PRP it)) (PP (IN into) (NP (JJ separable) (JJ virtual) (NNS capacities)))) (CC and) (VP (VBG selling) (PP (IN to) (NP (NNS users)))))))) (. .))
(S (NP (DT Each) (NN user)) (VP (VP (VBZ purchases) (NP (DT the) (JJ virtual) (NN capacity))) (, ,) (CC and) (VP (VB utilize) (S (NP (PRP it)) (VP (TO to) (VP (VB reduce) (NP (DT the) (NN energy) (NN cost))))))) (. .))
(S (NP (PRP We)) (VP (VBP formulate) (NP (NP (NP (DT the) (NN interaction)) (PP (IN between) (NP (DT the) (NN aggregator)))) (CC and) (NP (NP (NNS users)) (PP (IN as) (NP (DT a) (NML (CD two) (HYPH -) (NN stage)) (NN optimization) (NN problem)))))) (. .))
(S (PP (IN In) (NP (NN Stage) (CD 1))) (, ,) (PP (IN over) (NP (DT the) (NN investment) (NN horizon))) (, ,) (NP (DT the) (NN aggregator)) (VP (VBZ determines) (NP (DT the) (NML (NN investment) (CC and) (NN pricing)) (NNS decisions))) (. .))
(S (PP (IN In) (NP (NN Stage) (CD 2))) (, ,) (PP (IN in) (NP (DT each) (JJ operational) (NN horizon))) (, ,) (NP (DT each) (NN user)) (VP (VBZ decides) (NP (DT the) (JJ virtual) (NN capacity)) (S (VP (TO to) (VP (VB purchase) (ADVP (RB together)) (PP (IN with) (NP (NP (DT the) (NN operation)) (PP (IN of) (NP (DT the) (JJ virtual) (NN storage))))))))) (. .))
(S (NP (PRP We)) (VP (VBP characterize) (NP (DT a) (JJ stepwise) (NN form)) (PP (PP (IN of) (NP (NP (NP (DT the) (JJ optimal) (NN solution)) (PP (IN of) (NP (NML (NN Stage) (HYPH -) (CD 2)) (NN Problem)))) (CC and) (NP (NP (DT a) (JJ piecewise) (JJ linear) (NN structure)) (PP (IN of) (NP (NP (DT the) (JJ optimal) (NN profit)) (PP (IN of) (NP (NML (NN Stage) (HYPH -) (CD 1)) (NN Problem)))))))) (, ,) (CC both) (PP (IN with) (NP (NN respect))) (PP (IN to) (NP (DT the) (JJ virtual) (NN capacity) (NN price))))) (. .))
(S (PP (VBN Based) (PP (IN on) (NP (DT the) (NN solution) (NN structure)))) (, ,) (NP (PRP we)) (VP (VBP design) (NP (DT an) (NN algorithm)) (PP (IN to) (VP (VB attain) (NP (NP (DT the) (JJ optimal) (NN solution)) (PP (IN of) (NP (DT the) (NML (CD two) (HYPH -) (NN stage)) (NN problem))))))) (. .))
(S (PP (IN In) (NP (PRP$ our) (NN simulation) (NNS results))) (, ,) (NP (DT the) (VBN proposed) (NML (NN storage) (NN virtualization)) (NN model)) (VP (MD can) (VP (VP (VB reduce) (NP (NP (DT the) (JJ physical) (NML (NN energy) (NN storage)) (NN investment)) (PP (IN of) (NP (DT the) (NN aggregator)))) (PP (IN by) (NP (CD 54.3) (NN %)))) (CC and) (VP (VB reduce) (NP (NP (DT the) (NNS users) (POS ')) (JJ total) (NNS costs)) (PP (IN by) (NP (CD 34.7) (NN %))) (, ,) (PP (VBN compared) (PP (IN to) (NP (NP (DT the) (NN case)) (SBAR (WHADVP (WRB where)) (S (NP (NNS users)) (VP (VBP acquire) (NP (PRP$ their) (JJ own) (JJ physical) (NN storage))))))))))) (. .))
